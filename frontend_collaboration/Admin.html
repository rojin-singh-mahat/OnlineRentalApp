<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Panel - Property Management</title>
    <style>
        /* ===== Global Styles ===== */
        
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 2rem;
            background: #f5f5f5;
            color: #333;
        }
        
        h2 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 1.5rem;
        }
        /* ===== Form Styles ===== */
        
        form {
            max-width: 600px;
            margin: 0 auto 2rem;
            background: #fff;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        input,
        select,
        textarea,
        button {
            width: 100%;
            margin-bottom: 1.25rem;
            padding: 12px;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            transition: border-color 0.3s;
        }
        
        input:focus,
        select:focus,
        textarea:focus {
            border-color: #4CAF50;
            outline: none;
        }
        
        button {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #45a049;
        }
        /* ===== Search Bar ===== */
        
        .search-bar {
            display: block;
            max-width: 600px;
            margin: 1.5rem auto;
            border: 1px solid #ddd;
            padding: 12px;
            border-radius: 6px;
            font-size: 1rem;
        }
        /* ===== Property List Styles ===== */
        
        .property-list {
            max-width: 600px;
            margin: 0 auto;
            padding: 1.5rem;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        /* Overhauled card grid layout */
        
        .property {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            padding: 1rem;
            display: grid;
            grid-template-rows: auto auto 1fr auto;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }
        
        .property img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            /* crops any black bars */
            border-radius: 8px;
            grid-row: 1;
        }
        
        .property h3 {
            margin: 0;
            color: #2c3e50;
            font-size: 1.25rem;
            grid-row: 2;
        }
        
        .property .details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem 1rem;
            font-size: 0.95rem;
            color: #555;
            line-height: 1.4;
            grid-row: 3;
        }
        
        .property .details p {
            margin: 0;
        }
        
        .remove-btn {
            justify-self: start;
            background-color: #e74c3c;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
            grid-row: 4;
        }
        
        .remove-btn:hover {
            background-color: #c0392b;
        }
        /* ===== Empty State ===== */
        
        .empty-state {
            text-align: center;
            color: #7f8c8d;
            padding: 2rem;
        }
    </style>
</head>

<body>
    <h2>Admin Panel - Add Property</h2>
    <form id="propertyForm">
        <input type="text" id="name" placeholder="Property Name" required />
        <input type="text" id="location" placeholder="Location" required />
        <textarea id="description" placeholder="Property Description" rows="4" required></textarea>
        <select id="type" required>
      <option value="">Select Property Type</option>
      <option value="Apartment">Apartment</option>
      <option value="Villa">Villa</option>
    </select>
        <input type="number" id="bedrooms" placeholder="Number of Bedrooms" required />
        <input type="number" id="bathrooms" placeholder="Number of Bathrooms" required />
        <input type="text" id="area" placeholder="Area (e.g., 1500 sq ft)" required />
        <select id="parking" required>
      <option value="">Parking Available?</option>
      <option value="Yes">Yes</option>
      <option value="No">No</option>
    </select>
        <input type="file" id="image" accept="image/*" required />
        <button type="submit">Add Property</button>
    </form>

    <input type="text" id="searchBar" class="search-bar" placeholder="Search by Property Name" onkeyup="filterProperties()" />

    <div id="propertyList" class="property-list"></div>

    <script>
        // ===== DOM Elements =====
        const form = document.getElementById('propertyForm');
        const propertyList = document.getElementById('propertyList');
        const searchBar = document.getElementById('searchBar');

        // ===== Display =====
        function displayProperties(properties) {
            propertyList.innerHTML = '';
            if (properties.length === 0) {
                propertyList.innerHTML = '<p class="empty-state">No properties found.</p>';
                return;
            }
            properties.forEach((property, index) => {
                const propertyElement = document.createElement('div');
                propertyElement.classList.add('property');
                propertyElement.innerHTML = `
          <img src="${property.image}" alt="${property.name}" />
          <h3>${property.name}</h3>
          <div class="details">
            <p><strong>Location:</strong> ${property.location}</p>
            <p><strong>Type:</strong> ${property.type}</p>
            <p><strong>Bedrooms:</strong> ${property.bedrooms}</p>
            <p><strong>Bathrooms:</strong> ${property.bathrooms}</p>
            <p><strong>Area:</strong> ${property.area}</p>
            <p><strong>Parking:</strong> ${property.parking}</p>
            <p style="grid-column: span 2;"><strong>Description:</strong> ${property.description}</p>
          </div>
          <button class="remove-btn" onclick="removeProperty(${index})">Remove Property</button>
        `;
                propertyList.appendChild(propertyElement);
            });
        }

        // ===== Remove =====
        function removeProperty(index) {
            const props = JSON.parse(localStorage.getItem('properties')) || [];
            props.splice(index, 1);
            localStorage.setItem('properties', JSON.stringify(props));
            displayProperties(props);
        }

        // ===== Search =====
        function filterProperties() {
            const searchText = searchBar.value.toLowerCase();
            const props = JSON.parse(localStorage.getItem('properties')) || [];
            const filtered = props.filter(p => p.name.toLowerCase().includes(searchText));
            displayProperties(filtered);
        }

        // ===== Form Submission =====
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const file = document.getElementById('image').files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onloadend = function() {
                const img = new Image();
                img.src = reader.result;
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    const displayWidth = 600,
                        displayHeight = 200;
                    const scale = Math.min(displayWidth / img.width, displayHeight / img.height);
                    canvas.width = displayWidth;
                    canvas.height = displayHeight;
                    ctx.drawImage(img,
                        (displayWidth - img.width * scale) / 2,
                        (displayHeight - img.height * scale) / 2,
                        img.width * scale, img.height * scale
                    );
                    const optimizedImage = canvas.toDataURL('image/jpeg', 0.7);
                    const property = {
                        name: form.name.value.trim(),
                        location: form.location.value.trim(),
                        description: form.description.value.trim(),
                        type: form.type.value,
                        bedrooms: form.bedrooms.value,
                        bathrooms: form.bathrooms.value,
                        area: form.area.value.trim(),
                        parking: form.parking.value,
                        image: optimizedImage
                    };
                    const props = JSON.parse(localStorage.getItem('properties')) || [];
                    props.push(property);
                    localStorage.setItem('properties', JSON.stringify(props));
                    alert('Property added successfully!');
                    form.reset();
                    searchBar.value = '';
                    displayProperties(props);
                };
            };
            reader.readAsDataURL(file);
        });

        // ===== Initialize =====
        document.addEventListener('DOMContentLoaded', () => {
            const props = JSON.parse(localStorage.getItem('properties')) || [];
            displayProperties(props);
        });
    </script>
</body>

</html>